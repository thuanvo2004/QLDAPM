{% extends "base.html" %}
{% set active_page = "premium" %}

{% block content %}
<div class="container mt-4">
  <h2 class="mb-4">Ch·ªânh s·ª≠a Premium</h2>

  <div class="card">
    <div class="card-body">
      <h5 class="card-title">Th√¥ng tin ng∆∞·ªùi d√πng</h5>
      <p><strong>ID:</strong> {{ user.id }}</p>
      <p><strong>Email:</strong> {{ user.email }}</p>
      <p><strong>H·ªç t√™n:</strong> {{ user.full_name or "Ch∆∞a c·∫≠p nh·∫≠t" }}</p>
      <p><strong>Role:</strong>
        {% if user.role == "employer" %}
          <span class="badge bg-success">Nh√† tuy·ªÉn d·ª•ng</span>
        {% elif user.role == "candidate" %}
          <span class="badge bg-primary">·ª®ng vi√™n</span>
        {% endif %}
      </p>
      <p><strong>Tr·∫°ng th√°i:</strong>
        {% if user.is_active %}
          <span class="badge bg-success">Ho·∫°t ƒë·ªông</span>
        {% else %}
          <span class="badge bg-danger">B·ªã kh√≥a</span>
        {% endif %}
      </p>
      <p><strong>Ng√†y t·∫°o:</strong> {{ user.created_at.strftime("%d/%m/%Y") }}</p>

      {% if user.role == "employer" %}
        <!-- Form update premium -->
        <form method="POST" action="{{ url_for('admin.update_premium', user_id=user.id) }}" class="mt-3">
            <div class="mb-3">
                <label for="premium_until" class="form-label">Ng√†y h·∫øt h·∫°n Premium</label>
                <input type="date" class="form-control" id="premium_until" name="premium_until"
                       value="{{ user.premium_until.strftime('%Y-%m-%d') if user.premium_until else '' }}">
            </div>
            <button type="submit" class="btn btn-warning">üíé C·∫≠p nh·∫≠t Premium</button>
        </form>

        <form method="POST" action="{{ url_for('admin.delete_premium', id=user.id) }}" class="mt-2"
              onsubmit="return confirm('B·∫°n c√≥ ch·∫Øc mu·ªën x√≥a Premium?');">
            <button type="submit" class="btn btn-danger">üóë X√≥a Premium</button>
        </form>

        {% else %}
        <p class="text-muted mt-3">Ch·ªâ nh√† tuy·ªÉn d·ª•ng m·ªõi c√≥ Premium.</p>
      {% endif %}
    </div>
  </div>

  <a href="{{ url_for('admin.list_premium') }}" class="btn btn-secondary mt-4">‚¨Ö Quay l·∫°i danh s√°ch Premium</a>
</div>
{% endblock %}
