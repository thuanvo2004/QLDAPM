{% extends "base.html" %}
{% block title %}Trang Ch·ªß - JobNest{% endblock %}

{% block content %}
<!-- HERO -->
<section class="min-h-[450px] grid grid-cols-5 gap-6 items-center bg-gradient-to-tr from-[var(--primary-blue)] to-blue-800 text-white p-8">
  <!-- C·ªôt tr√°i -->
  <div class="col-span-3 space-y-6">
    <div>
      <h1 class="mb-3 text-4xl font-bold">T√¨m vi·ªác ph√π h·ª£p - Nhanh ch√≥ng & Uy t√≠n</h1>
      <p class="text-lg">T√¨m ki·∫øm theo v·ªã tr√≠, ng√†nh ngh·ªÅ v√† ƒë·ªãa ƒëi·ªÉm. H√†ng ng√†n c∆° h·ªôi t·ª´ nh√† tuy·ªÉn d·ª•ng uy t√≠n.</p>
    </div>

    <!-- Form search -->
    <form id="main-search" action="{{ url_for('job.list_jobs') }}" method="get" role="search"
      class="flex items-center gap-3 flex-wrap bg-white rounded-xl p-3 shadow-md">
      <!-- Keyword -->
      <div class="flex-1 min-w-0">
        <label for="keyword" class="sr-only">T·ª´ kh√≥a</label>
        <input id="keyword" name="keyword" type="text"
               placeholder="V·ªã tr√≠, k·ªπ nƒÉng ho·∫∑c c√¥ng ty"
               value="{{ request.args.get('keyword', '') }}"
               class="w-full block rounded-lg border border-gray-300 text-black px-4 py-3 text-sm placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-[var(--primary-blue)]">
      </div>

      <!-- Industry -->
      <div class="flex-1 min-w-0">
        <label for="industry-select" class="sr-only">Ng√†nh ngh·ªÅ</label>
        <select id="industry-select" name="industry"
                class="w-full block rounded-lg border border-gray-300 text-gray-400 px-4 py-3 text-sm appearance-none bg-white focus:outline-none focus:ring-2 focus:ring-[var(--primary-blue)]">
          <option value="">Ng√†nh ngh·ªÅ</option>
          {% for industry in industries %}
            <option value="{{ industry.id }}" {% if request.args.get('industry') == industry.id %}selected{% endif %}>{{ industry.name }}</option>
          {% endfor %}
        </select>
      </div>

      <!-- Location -->
      <div class="flex-1 min-w-0 location-select relative">
        <label class="sr-only">T·ªânh/Th√†nh ph·ªë</label>

        <!-- visible container -->
        <div id="location-input"
             class="flex items-center justify-between w-full rounded-lg border border-gray-300 bg-white px-4 py-3 text-sm text-gray-400 cursor-pointer hover:border-[var(--primary-blue)] focus:outline-none focus:ring-2 focus:ring-[var(--primary-blue)]"
             tabindex="0" role="button" aria-expanded="false">
          <span class="location-placeholder truncate">Ch·ªçn T·ªânh/Th√†nh ph·ªë</span>
          <!-- caret -->
          <svg class="w-4 h-4 ml-2 text-gray-400" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" />
          </svg>
        </div>

        <!-- dropdown -->
        <div id="location-dropdown"
             class="location-dropdown mt-2 w-full max-h-80 overflow-y-auto bg-white border border-gray-200 rounded-lg shadow-lg z-50 text-black">
          <ul id="province-list" class="p-2">
            {% for province in provinces %}
              <li class="px-2 py-1">
                <label class="flex items-center gap-3 w-full cursor-pointer">
                  <input type="checkbox" data-name="{{ province.name }}" value="{{ province.id }}"
                         {% if province.id in request.args.get('city', '').split(',') %}checked{% endif %}
                         class="hidden">
                  <!-- visual box -->
                  <span class="box w-4 h-4 inline-block shrink-0"></span>
                  <span class="pname text-sm text-gray-800 truncate">{{ province.name }}</span>
                </label>
              </li>
            {% endfor %}
          </ul>
        </div>

        <input type="hidden" id="location-hidden" name="city" value="{{ request.args.get('city', '') }}">
        <input type="hidden" id="location-hidden-quick" name="city_quick" value="{{ request.args.get('city', '') }}">
      </div>

      <!-- Submit button (fixed smaller width) -->
      <div class="w-auto">
        <button type="submit"
                class="inline-flex items-center justify-center px-6 py-3 bg-[var(--primary-blue)] text-white font-semibold rounded-lg hover:bg-[var(--primary-blue-hover)] transition">
          T√¨m ki·∫øm
        </button>
      </div>
    </form>
  </div>

  <!-- C·ªôt ph·∫£i -->
  <div class="col-span-2 flex justify-center">
    <img src="/static/images/job-search-illustration.jpg" alt="Job Search" class="max-w-full h-auto rounded-xl">
  </div>
</section>

<!-- Companies Our Talents Work At -->
    <section class="companies-section py-16">
      <div class="container mx-auto">
        <h2 class="text-3xl font-bold text-center mb-10 text-gray-800">C√°c C√¥ng Ty H√†ng ƒê·∫ßu Tuy·ªÉn D·ª•ng T·∫°i JobNest</h2>
          <div class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-6 items-center justify-items-center">
            <a href="https://vingroup.net/" target="_blank" class="company-logo block w-26 hover:scale-105 transition">
              <img src="{{ url_for('static', filename='images/companies/Vingroup_logo.png') }}" alt="Vingroup Logo" class="w-full h-auto">
            </a>
            <a href="https://fpt.com.vn/" target="_blank" class="company-logo block w-26 hover:scale-105 transition">
              <img src="{{ url_for('static', filename='images/companies/FPT_logo.png') }}" alt="FPT Logo" class="w-full h-auto">
            </a>
            <a href="https://vinamilk.com.vn/" target="_blank" class="company-logo block w-26 hover:scale-105 transition">
              <img src="{{ url_for('static', filename='images/companies/Vinamilk.png') }}" alt="Vinamilk Logo" class="w-full h-auto">
            </a>
            <a href="https://vng.com.vn/" target="_blank" class="company-logo block w-26 hover:scale-105 transition">
              <img src="{{ url_for('static', filename='images/companies/VNG_Corp.png') }}" alt="VNG Logo" class="w-full h-auto">
            </a>
          </div>
      </div>
    </section>


    <!-- JOB LIST -->
    <section class="job-preview-section py-16">
      <div class="container mx-auto">
        <h2 class="text-3xl font-bold mb-10 text-center text-gray-800">C∆° h·ªôi vi·ªác l√†m ƒëang ch·ªù b·∫°n</h2>
        <!-- Grid 4 c·ªôt -->
        <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-8">
          {% for job in jobs[:4] %}
            <article class="job-card bg-white rounded-2xl p-6 shadow-md transition-all duration-300">
              <div class="job-header flex items-center justify-between mb-4">
                <div class="company-logo-wrapper">
                  {% if job.employer and job.employer.logo %}
                    <img src="{{ job.employer.logo }}"
                         alt="{{ job.employer.company_name }}"
                         class="company-logo-img h-14 w-14 rounded-lg object-cover border-2 border-gray-200" />
                  {% else %}
                    <div class="company-logo h-14 w-14 rounded-lg bg-gray-100 flex items-center justify-center text-gray-400 text-2xl">
                      üè¢
                    </div>
                  {% endif %}
                </div>
              </div>

              <h3 class="job-title font-bold text-xl mb-1">
                <a href="{{ url_for('job.job_detail', job_id=job.id) }}" class="text-gray-900 hover:text-blue-600 transition-colors">{{ job.title }}</a>
              </h3>
              <p class="company-name text-sm text-gray-600 mb-1">
                <i class="fa-solid fa-building mr-2 text-gray-400"></i> {{ job.employer.company_name or 'C√¥ng ty ·∫©n danh' }}
              </p>
              <p class="job-location text-sm text-gray-600 mb-3">
                <i class="fa-solid fa-location-dot mr-2 text-gray-400"></i> {{ job.city or 'ƒê·ªãa ƒëi·ªÉm ·∫©n danh' }}
              </p>
              <p class="job-description text-sm text-gray-500 mb-3 line-clamp-2">
                {{ job.description | truncate(80, true) }}
              </p>
              <div class="job-tags flex flex-wrap gap-2 text-xs">
                <span class="tag bg-[var(bg-blue)] px-3 py-1 rounded-full text-[var(--[primary-blue)] font-medium">{{ job.job_type or '-' }}</span>
                <span class="tag bg-[var(bg-blue)] px-3 py-1 rounded-full text-[var(--[primary-blue)] font-medium">{{ job.remote_option or 'On-Site' }}</span>
                <span class="tag bg-[var(bg-blue)] px-3 py-1 rounded-full text-[var(--[primary-blue)] font-medium">{{ format_salary_range(job.salary_min, job.salary_max) }}</span>
              </div>
            </article>
          {% endfor %}
        </div>

        <!-- Link ƒë·∫øn trang t·∫•t c·∫£ vi·ªác l√†m -->
        <div class="text-center mt-12">
          <a href="{{ url_for('job.list_jobs') }}"
             class="inline-flex items-center space-x-2 text-blue-600 hover:underline transition-colors font-medium text-lg">
            <span>Xem th√™m t·∫•t c·∫£ vi·ªác l√†m</span>
            <i class="fa-solid fa-arrow-right"></i>
          </a>
        </div>
      </div>
    </section>

    <!-- WHY CHOOSE US -->
    <section class="why-choose-us-section bg-white py-16">
      <div class="container mx-auto">
        <h2 class="text-3xl font-bold text-center mb-10 text-gray-800">T·∫°i sao n√™n ch·ªçn JobNest?</h2>
        <main class="grid grid-cols-1 md:grid-cols-3 gap-8">
          <div class="feature-card bg-gray-50 p-8 rounded-xl shadow-lg hover:shadow-2xl transition-all duration-300
              flex flex-col items-center text-center">
            <div class="icon-wrapper mb-4 text-white p-4 rounded-full bg-[var(--primary-blue)] shadow-md">
                <i class="fa-solid fa-magnifying-glass text-3xl"></i>
            </div>
            <h3 class="text-xl font-semibold mb-2 text-gray-900">T√¨m ki·∫øm d·ªÖ d√†ng</h3>
            <p class="text-gray-600">C√¥ng c·ª• t√¨m ki·∫øm m·∫°nh m·∫Ω gi√∫p b·∫°n nhanh ch√≥ng t√¨m ƒë∆∞·ª£c vi·ªác l√†m ph√π h·ª£p.</p>
          </div>
          <div class="feature-card bg-gray-50 p-8 rounded-xl shadow-lg hover:shadow-2xl transition-all duration-300
              flex flex-col items-center text-center">
            <div class="icon-wrapper mb-4 text-white p-4 rounded-full bg-[var(--primary-blue)] shadow-md">
                <i class="fa-solid fa-briefcase text-3xl"></i>
            </div>
            <h3 class="text-xl font-semibold mb-2 text-gray-900">C∆° h·ªôi ƒëa d·∫°ng</h3>
            <p class="text-gray-600">H√†ng ng√†n vi·ªác l√†m t·ª´ c√°c ng√†nh ngh·ªÅ kh√°c nhau, t·ª´ kh·∫Øp n∆°i tr√™n c·∫£ n∆∞·ªõc.</p>
          </div>
          <div class="feature-card bg-gray-50 p-8 rounded-xl shadow-lg hover:shadow-2xl transition-all duration-300
              flex flex-col items-center text-center">
            <div class="icon-wrapper mb-4 text-white p-4 rounded-full bg-[var(--primary-blue)] shadow-md">
                <i class="fa-solid fa-shield text-3xl"></i>
            </div>
            <h3 class="text-xl font-semibold mb-2 text-gray-900">Uy t√≠n & An to√†n</h3>
            <p class="text-gray-600">Ch√∫ng t√¥i ki·ªÉm duy·ªát k·ªπ l∆∞·ª°ng c√°c nh√† tuy·ªÉn d·ª•ng ƒë·ªÉ ƒë·∫£m b·∫£o m√¥i tr∆∞·ªùng an to√†n cho b·∫°n.</p>
          </div>
        </main>
      </div>
    </section>

    <!-- CTA Section -->
    <section class="py-16">
      <div class="container mx-auto">
        <div class="bg-gradient-to-r from-blue-600 to-blue-900 p-8 md:p-12 rounded-3xl text-white shadow-xl">
          <div class="grid grid-cols-1 md:grid-cols-2 items-center gap-8">
            <div>
              <h2 class="text-3xl md:text-4xl font-bold leading-tight mb-2">
                B·∫°n ƒë√£ s·∫µn s√†ng ƒë·ªÉ ·ª©ng tuy·ªÉn ho·∫∑c tuy·ªÉn d·ª•ng ch∆∞a?
              </h2>
              <p class="text-blue-200 text-lg">
                T√¨m ki·∫øm c√¥ng vi·ªác m∆° ∆∞·ªõc ho·∫∑c thu h√∫t nh√¢n t√†i h√†ng ƒë·∫ßu ngay h√¥m nay!
              </p>
            </div>
            <div class="flex justify-start md:justify-end">
              <a href="{{ url_for('auth.register') }}"
                 class="inline-block bg-white text-blue-600 font-bold px-8 py-4 rounded-full shadow-lg hover:bg-gray-100 transition-colors">
                B·∫Øt ƒë·∫ßu ngay
              </a>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- FAQ Section -->
    <section class="max-w-5xl mx-auto my-12 px-4">
      <h2 class="text-3xl font-bold text-center mb-8 text-gray-800">
        C√¢u h·ªèi th∆∞·ªùng g·∫∑p (FAQ)
      </h2>
      <div class="space-y-4">
        <!-- Item 1 -->
        <details class="faq-details group rounded-xl transition-all duration-300">
          <summary class="flex justify-between items-center cursor-pointer font-semibold text-gray-800 p-4">
            L√†m sao ƒë·ªÉ ·ª©ng tuy·ªÉn m·ªôt c√¥ng vi·ªác?
            <span class="transition-transform group-open:rotate-180 text-blue-500">
              <i class="fa-solid fa-chevron-down"></i>
            </span>
          </summary>
          <p class="mt-2 text-gray-600 px-4 pb-4">
            B·∫°n ch·ªâ c·∫ßn t·∫°o t√†i kho·∫£n, t√¨m c√¥ng vi·ªác ph√π h·ª£p v√† nh·∫•n n√∫t <b>·ª®ng tuy·ªÉn ngay</b>.
            H·ªá th·ªëng s·∫Ω g·ª≠i CV c·ªßa b·∫°n ƒë·∫øn nh√† tuy·ªÉn d·ª•ng.
          </p>
        </details>

        <!-- Item 2 -->
        <details class="faq-details group rounded-xl transition-all duration-300">
          <summary class="flex justify-between items-center cursor-pointer font-semibold text-gray-800 p-4">
            T√¥i c√≥ c·∫ßn tr·∫£ ph√≠ khi ·ª©ng tuy·ªÉn kh√¥ng?
            <span class="transition-transform group-open:rotate-180 text-blue-500">
              <i class="fa-solid fa-chevron-down"></i>
            </span>
          </summary>
          <p class="mt-2 text-gray-600 px-4 pb-4">
            Kh√¥ng. ·ª®ng vi√™n ho√†n to√†n <b>mi·ªÖn ph√≠</b> khi t√¨m v√† ·ª©ng tuy·ªÉn c√¥ng vi·ªác tr√™n JobNest.
          </p>
        </details>

        <!-- Item 3 -->
        <details class="faq-details group rounded-xl transition-all duration-300">
          <summary class="flex justify-between items-center cursor-pointer font-semibold text-gray-800 p-4">
            Nh√† tuy·ªÉn d·ª•ng c·∫ßn l√†m g√¨ ƒë·ªÉ ƒëƒÉng tin tuy·ªÉn d·ª•ng?
            <span class="transition-transform group-open:rotate-180 text-blue-500">
              <i class="fa-solid fa-chevron-down"></i>
            </span>
          </summary>
          <p class="mt-2 text-gray-600 px-4 pb-4">
            Doanh nghi·ªáp ch·ªâ c·∫ßn ƒëƒÉng k√Ω t√†i kho·∫£n, sau ƒë√≥ c√≥ th·ªÉ t·∫°o v√† qu·∫£n l√Ω tin tuy·ªÉn d·ª•ng ngay trong trang qu·∫£n tr·ªã.
          </p>
        </details>
      </div>
    </section>
</main>
  </div>
</section>
{% endblock %}