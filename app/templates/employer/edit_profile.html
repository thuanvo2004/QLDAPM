{% extends "base.html" %}
{% block content %}
<div class="max-w-4xl mx-auto my-8">
  <div class="bg-white shadow rounded-2xl">
    <!-- Header -->
    <div class="bg-[var(--primary-blue)] text-white rounded-t-2xl px-6 py-4">
      <h2 class="text-xl font-semibold flex items-center gap-2 uppercase">
        Chỉnh sửa hồ sơ công ty
      </h2>
    </div>

    <!-- Body -->
    <div class="p-6">
      <form method="POST" enctype="multipart/form-data" class="space-y-6">
        {{ form.hidden_tag() }}

        <!-- Liên hệ -->
        <div>
          <h3 class="text-gray-700 font-semibold mb-3 flex items-center gap-2">Liên hệ</h3>
          <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
            <div>
              {{ form.phone.label(class="block text-sm font-semibold text-gray-700 mb-1") }}
              {{ form.phone(class="w-full border-gray-300 focus:ring-2 focus:ring-gray-900 focus:border-gray-900 py-2") }}
            </div>
            <div>
              {{ form.website.label(class="block text-sm font-semibold text-gray-700 mb-1") }}
              {{ form.website(class="w-full border-gray-300 focus:ring-2 focus:ring-gray-900 focus:border-gray-900 py-2") }}
            </div>
          </div>
        </div>

        <!-- Công ty -->
        <div>
          <h3 class="text-gray-700 font-semibold mb-3 flex items-center gap-2">Công ty</h3>
          <div>
            {{ form.industry.label(class="block text-sm font-semibold text-gray-700 mb-1") }}
            {{ form.industry(class="w-full border-gray-300 focus:ring-2 focus:ring-gray-900 focus:border-gray-900 py-2") }}
          </div>
          <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mt-4">
            <div>
              {{ form.company_size.label(class="block text-sm font-semibold text-gray-700 mb-1") }}
              {{ form.company_size(class="w-full border-gray-300 focus:ring-2 focus:ring-gray-900 focus:border-gray-900 py-2") }}
            </div>
            <div>
              {{ form.founded_year.label(class="block text-sm font-semibold text-gray-700 mb-1") }}
              {{ form.founded_year(class="w-full border-gray-300 focus:ring-2 focus:ring-gray-900 focus:border-gray-900 py-2") }}
            </div>
            <div>
              {{ form.tax_code.label(class="block text-sm font-semibold text-gray-700 mb-1") }}
              {{ form.tax_code(class="w-full border-gray-300 focus:ring-2 focus:ring-gray-900 focus:border-gray-900 py-2") }}
            </div>
          </div>
        </div>

        <!-- Địa chỉ -->
        <div>
          {{ form.address.label(class="block text-sm font-semibold text-gray-700 mb-1") }}
          {{ form.address(class="w-full border-gray-300 focus:ring-2 focus:ring-gray-900 focus:border-gray-900 py-2") }}
        </div>

        <div>
          {{ form.city.label(class="block text-sm font-semibold text-gray-700 mb-1") }}
          {{ form.city(class="w-full border-gray-300 focus:ring-2 focus:ring-gray-900 focus:border-gray-900 py-2") }}
        </div>

        <!-- Mô tả -->
        <div>
          {{ form.description.label(class="block text-sm font-semibold text-gray-700 mb-1") }}
          {{ form.description(class="w-full border-gray-300 focus:ring-2 focus:ring-gray-900 focus:border-gray-900 py-2", rows=5, placeholder="Giới thiệu ngắn gọn về công ty...") }}
        </div>

        <!-- Logo -->
        <div>
          <h3 class="text-gray-700 font-semibold mb-3 flex items-center gap-2">Logo công ty</h3>
          <div class="flex items-center gap-6">
            <div class="flex-1">
              {{ form.logo.label(class="block text-sm font-semibold text-gray-700 mb-1") }}
              {{ form.logo(class="block w-full text-sm text-gray-700 border border-gray-300 cursor-pointer bg-gray-50 focus:outline-none focus:ring-2 focus:ring-gray-900 focus:border-gray-900") }}
            </div>
            <div>
              <img class="logo-preview h-24 w-24 object-contain rounded-lg border border-gray-200 bg-gray-50 p-2"
                   src="{{ employer.logo or '' }}"
                   alt="Logo preview"
                   {% if not employer.logo %}style="display:none"{% endif %}>
            </div>
          </div>
        </div>

        <!-- Buttons -->
        <div class="flex justify-end gap-3">
          <a href="{{ url_for('employer.profile') }}" class="px-5 py-2 rounded-lg border !border-[var(--primary-blue)] text-[var(--primary-blue)] hover:bg-[var(--primary-blue)] hover:text-white transition">
            Hủy
          </a>
          <button class="px-5 py-2 rounded-lg bg-[var(--primary-blue)] text-white hover:bg-[var(--primary-blue-hover)] transition">
            {{ form.submit.label.text }}
          </button>
        </div>
      </form>
    </div>
  </div>
</div>

<script>
const logoInput = document.querySelector('input[name="logo"]');
const logoPreview = document.querySelector('.logo-preview');
if(logoInput){
  logoInput.addEventListener('change', function() {
    const [file] = this.files;
    if(file){
      logoPreview.src = URL.createObjectURL(file);
      logoPreview.style.display = "block";
    }
  });
}
</script>
{% endblock %}
