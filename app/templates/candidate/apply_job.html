{% extends "base.html" %}

{% block title %}Ứng tuyển công việc{% endblock %}

{% block content %}
<div class="max-w-2xl mx-auto bg-white rounded-xl border border-gray-200 p-8 m-4">

  <!-- Tiêu đề -->
  <h1 class="text-2xl font-bold text-gray-800 mb-6 flex items-center gap-2">
    Ứng tuyển vị trí: <span class="text-blue-700">{{ job.title }}</span>
  </h1>

  <!-- Form -->
  <form method="POST" enctype="multipart/form-data" class="space-y-6">
    <!-- CV có sẵn -->
    <div>
      <label class="block font-semibold text-gray-700 mb-2">Chọn CV đã tạo</label>
      <select name="cv_id" class="w-full border border-gray-300 p-3 rounded-lg focus:ring-2 focus:ring-blue-600">
        <option value="">-- Chọn CV --</option>
        {% for cv in cvs %}
          <option value="{{ cv.id }}">
            {{ cv.cv_name }}
            ({{ 'Đang dùng' if cv.is_used() else 'Chưa dùng' }})
          </option>
        {% endfor %}
      </select>
    </div>

    <!-- Upload mới -->
    <div>
      <label class="block font-semibold text-gray-700 mb-2">Hoặc tải CV mới (PDF)</label>
      <input type="file" name="cv_upload" accept=".pdf"
        class="w-full border border-gray-300 p-3 rounded-lg cursor-pointer file:mr-4 file:py-2 file:px-4
        file:rounded-md file:border-0 file:text-sm file:font-semibold
        file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100 focus:ring-2 focus:ring-blue-600">
    </div>

    <!-- Tạo CV -->
    <div class="text-sm">
      <a href="{{ url_for('cv.create_cv') }}"
         class="text-blue-600 hover:text-blue-700 hover:underline font-medium">
        <i class="fa-solid fa-plus mr-1"></i> Tạo CV mới
      </a>
    </div>

    <!-- Submit -->
    <button type="submit"
      class="w-full bg-blue-600 hover:bg-blue-700 text-white font-semibold py-3 rounded-lg shadow transition flex items-center justify-center gap-2">
      <i class="fa-solid fa-paper-plane"></i> Nộp hồ sơ
    </button>
  </form>
</div>
{% endblock %}
